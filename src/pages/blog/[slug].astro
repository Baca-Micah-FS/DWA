---
import Layout from "../../layouts/layout.astro";
import { getCollection } from "astro:content";

const { slug } = Astro.params;

// list what Astro thinks exists
const posts = await getCollection('blog');
const slugs = posts.map(p => p.slug);

const entry = posts.find(p => p.slug === String(slug));

if (!entry) {
  // this will show you the available slugs in the error
  throw new Error(`Post not found for slug: ${slug}. Available: ${slugs.join(', ')}`);
}

const { Content } = await entry.render();
const { title } = entry.data;
---
